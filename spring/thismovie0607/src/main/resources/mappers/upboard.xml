<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="kr.co.ictedu.thismovie0607.dao.UpboardDao">
	
	<insert id="upAdd" parameterType="upvo">
                insert into movie_upboard values(movie_upboard_seq.nextVal,#{title},#{writer},#{content}, 0, #{reip}, sysdate, #{imgn})
        </insert>
        
        <select id="upList" resultType="upvo" parameterType="map">
                select num,title,writer, content, hit, reip, bdate, imgn, row_num FROM
                (
                select num, title, writer, content, hit, reip, bdate, imgn,
                row_number() over(order by num desc) as row_num
                from movie_upboard       
                ) numbered_rows where row_num between #{begin} and #{end}
        </select>
        
        <select id="upTotalCount" resultType="int">
            select count(*) cnt from movie_upboard
        </select>
        
        <update id="upHit" parameterType="int">
                update movie_upboard set hit=hit+1 where num=#{num}
        </update>
        
        <select id="upDetail" resultType="upvo" parameterType="int">
                select num, title, writer, content, imgn, hit, reip, bdate
                from movie_upboard where num=#{num}
        </select>
        
 </mapper>